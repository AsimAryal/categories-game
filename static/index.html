<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Categories Game</title>
    <link rel="stylesheet" href="/static/styles.css?v=2">
</head>
<body>
    <div id="app">
        <!-- CONNECTION STATUS -->
        <div id="status-bar" class="hidden">Connecting...</div>

        <!-- DARK MODE TOGGLE -->
        <button id="theme-toggle" class="theme-btn" aria-label="Toggle Dark Mode">ðŸŒ™</button>

        <!-- NAME ENTRY MODAL -->
        <div id="name-modal" class="modal hidden">
            <div class="modal-content">
                <h2>ðŸ‘‹ Welcome!</h2>
                <p>Enter your name to get started:</p>
                <input type="text" id="modal-name-input" placeholder="Your Name" maxlength="20">
                <button id="btn-modal-save">Let's Play!</button>
            </div>
        </div>

        <!-- LOBBY SCREEN -->
        <section id="lobby-screen" class="screen">
            <h1>Categories</h1>
            
            <!-- Player Greeting -->
            <div id="player-greeting" class="greeting-bar">
                Playing as: <span id="display-player-name"></span>
                <button id="btn-change-name" class="text-btn">Change</button>
            </div>
            
            <!-- Tab Navigation -->
            <div class="tabs">
                <button class="tab-btn active" data-tab="join">Join Game</button>
                <button class="tab-btn" data-tab="host">Host Game</button>
            </div>
            
            <!-- Join Tab -->
            <div id="tab-join" class="tab-content active">
                <div id="games-list-container" class="card hidden">
                    <h2>Available Games</h2>
                    <div id="games-list"></div>
                </div>
                
                <div class="card">
                    <h3>Join with Code</h3>
                    <input type="text" id="join-code" placeholder="Room Code" style="text-transform: uppercase;">
                    <button id="btn-join">Join Game</button>
                </div>
            </div>
            
            <!-- Host Tab -->
            <div id="tab-host" class="tab-content">
                <div class="card">
                    <h2>Create a New Game</h2>
                    <p style="color: #888; margin-bottom: 16px;">Start your own game and invite friends!</p>
                    <button id="btn-host">Host New Game</button>
                </div>
            </div>
        </section>

        <!-- WAITING ROOM (LOBBY AFTER JOIN) -->
        <section id="waiting-screen" class="screen hidden">
            <h1>Room: <span id="display-room-code"></span></h1>
            <div id="player-list">
                <!-- Players inserted here -->
            </div>
            <div id="host-controls" class="hidden">
                <div class="config-row">
                    <label>Rush Timer (sec):</label>
                    <input type="number" id="config-rush-time" value="5" min="5" max="60" style="width: 80px;">
                </div>
                <div class="config-row">
                    <label for="config-precise-scoring">Precise Scoring:</label>
                    <input type="checkbox" id="config-precise-scoring" style="width: auto; margin: 0;">
                    <small style="color: #888; margin-left: 8px;">(Decimal scores)</small>
                </div>
                <button id="btn-start-game" class="primary-btn">Start Game</button>
            </div>
            <div id="waiting-msg" class="hidden">Waiting for host to start...</div>
            <button id="btn-leave-game" class="secondary-btn" style="margin-top: 20px;">Leave Game</button>
        </section>

        <!-- TOAST CONTAINER -->
        <div id="toast-container"></div>

        <!-- GAME ROUND SCREEN -->
        <section id="game-screen" class="screen hidden">
            <div class="game-header">
                <div class="letter-display">Letter: <span id="current-letter">?</span></div>
                <div class="timer" id="timer">60</div>
            </div>
            
            <div id="categories-container">
                <!-- Categories inputs inserted here -->
            </div>
            
            <button id="btn-submit" class="floating-action-btn">Submit Answers</button>
        </section>

        <!-- SCORING SCREEN -->
        <section id="scoring-screen" class="screen hidden">
            <h2>Scoring</h2>
            <p id="scoring-subtitle">Rate the answers!</p>
            <div id="scoring-container">
                <!-- Scoring rows inserted here -->
            </div>
            <button id="btn-submit-scores" class="primary-btn">Submit Scores</button>
        </section>

        <!-- ROUND RESULTS SCREEN -->
        <section id="results-screen" class="screen hidden">
            <h2>Round Results</h2>
            <div id="round-summary">
                <!-- Scores inserted here -->
            </div>
            
            <div id="round-details">
                <!-- Detailed answer list -->
            </div>

            <div id="next-round-controls" class="hidden">
                <button id="btn-next-round" class="primary-btn">Next Round</button>
            </div>
             <div id="waiting-next-round" class="hidden">Waiting for host...</div>

             <button id="btn-end-game" class="secondary-btn hidden">End Game</button>
        </section>

        <!-- FINAL RESULTS SCREEN -->
        <section id="final-screen" class="screen hidden">
            <h1>Game Over</h1>
            <div id="final-scores"></div>
            <div id="game-history"></div>
            <button id="btn-play-again" class="primary-btn">Play Again</button>
        </section>
    </div>

    <script src="/static/app.js?v=2"></script>
</body>
</html>
